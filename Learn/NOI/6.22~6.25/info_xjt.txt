题目来源：CF482 E
题目大意：给一棵树，有点权，询问随机选2个点的lca权值期望。支持单点改权值和换父亲。n=100000
题目解法：用aaa树维护，节点x保存以这个节点为根结点的子树中LCA为x的路径种数，x的子树大小tree_siz，x在splay中不包括splay树中右儿子tree_siz的siz，access时更新。细节很多

题目来源：CF528 E
题目大意：n条直线互不平行随机选3条问组成三角形面积期望。
题目解法：叉积有分配律。极角排序后枚举一条直线按极角序枚举第二条直线，把该交点与前面交点的和的叉积加入答案。容易发现每个三角形的三个顶点都以同一方向计算差积记入答案，


题目来源：CF gym 101156
题目大意：给n个形如a+b=c的等式，ab为变量，c为常数，m个询问d+e是否可以确定n、m=5000
题目解法：二分图染色。联通快内有奇环可以全部算出来，否则如果颜色不同可以算出来

题目来源：CF gym 101193 B
题目大意：给一个n*n的矩阵，每个格子内有一个颜色。随机选出一个子矩形，问期望颜色数。n=1000
题目解法：算每个颜色的贡献。含某一颜色的矩形数不好算，补集转化。从左往右扫用set维护扫描线上点并计算贡献。

题目来源：CF gym 101193 F
题目大意：给一个仙人掌，问有多少种方案把它切成小块，每块siz<=3
题目解法：每个点维护它所在联通快当前siz，环上树上分开dp，细节很多

题目来源：PA2015 Final Edycja
题目大意：显然做完操作2后再做操作1。
题目解法：
建立一个26个点的有向图，每个点只有一条出边，i->j表示i最终变成了j，边权为一开始是i，最后不是j的位置个数，如果i≠j，则代价还要增加c。
对于每个点贪心选取最小的出边，如果没有环，那么此时就是最优解。
否则，对于一个连通块，如果它是环，那么需要多付出c点代价，而且如果所有连通块都是环或者孤立点，则不可能构造出这种图。
考虑重新决定每个点的出边，如果出现了原来贪心构造出的图中不存在的环，那么一定有一个点的出边和一开始不同，因为一开始是贪心选最小，因此把那条边改回最开始的出边，答案不会增加，而且新环被破坏了。因此对于不是原来中的图的环，一定存在一种方案与它代价相同，且不存在这个环。
于是设f[i][S][j]表示考虑了前i个字符，S集合的环已经被破坏，是否和原图一样为j时边权的最小值，DP即可。
因为最多只有13个环，所以时间复杂度为O(26*26*(2^13))。
