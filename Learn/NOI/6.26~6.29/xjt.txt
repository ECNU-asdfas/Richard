题目来源：bzoj 2130
题目大意：三座塔，每座塔n层，为进入某层需要一把钥匙，每座塔每层颜色不同，第i种颜色钥匙有a[i]<3把进入每层有收益。最大化收益。

题目解法：考虑从0到n枚举A的通关楼层。
设f[i]表示B通关i层时C最多能得到多少金币
当A的通关楼层往上多1的时候，这把钥匙必须给A。
如果这把钥匙还剩0把，那么说明：
1.B某些楼层j以上都不能到达，对应f[>=j]变为-inf
2.C某些楼层j以上都不能到达，对应f的某个后缀与sumc[j-1]取min。
如果这把钥匙还剩1把，那么说明：
当B的楼层在j以上时，C不能到达k以上的楼层，对应f的某个>=j的后缀中与sumc[k-1]取min。
segment tree beats
  
题目来源：CC PREFIXOR
题目大意：n个点m条边依次加入，q次询问哪个时刻图第一次联通。支持交换2条边的位置。nmq 1e5
题目解法：cdq分治，分治过程比较不显然。
对与当前操作区间存下当前边表。
边表分为会被修改和不被修改的两种记为e1e2；
siz[e1]=2*（r-l+1）
把边表按当前顺序排序
在并查集中e2按序合并，去除没有发生合并的边，它们对答案没有贡献
在新的并查集中合并e1，在合并e2，所有e2中发生合并的边为e3
在这个区间内e3一定会被合并，把当前答案对它们取max，把点按这个并查集重标号
把{e1}和{e2-e3}传入下一层递归结构。

{e2-e3}为连通性受e1影响的边集，本身最多也是一个生成森林，不会连接孤立点（那就不受e1影响了），且和e1能保证联通整个图，所以siz也是和e1同级的同理点数级别也和e1相同
每个分治结构内都要排序 复杂度（nlogn^2）常数很大


题目来源：bzoj 4762
题目大意：定义一个非空集合是合法的，当且仅当它满足以下两个条件。
1、集合内所有元素and和为0
2、它的非空子集中仅有它本身满足1
给出一个集合S，求它的合法非空子集数。
n=1e3;ai<1024
题目解法：容斥，一个暴力：枚举一个集合S，枚举它的一个子集SS，满足原集合去掉该子集的任意一个元素后and为0，容斥系数为（-1）^子集siz.
dp[i][j][k]做到第i个元素，S的and和为j，S去掉每个SS元素后取or和。
容易发现j是k的子集 O(n*3^10) 


题目来源：ztr
题目大意：给一个矩阵填了一些01，在空白格内填上01保证每个长宽为偶数的的子矩阵0、1数量相等n=m=1000求方案数
题目解法：黑白染色，翻转黑格的状态，变为要求对角线和相等，容易发现合法答案为每行相等每列相等的方案数，减去重算的部分就好了